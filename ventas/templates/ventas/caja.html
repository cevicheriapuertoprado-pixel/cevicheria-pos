{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="detalle-caja-container">
  <div class="detalle-caja-card" data-aos="fade-up">
    <h2 class="titulo">ðŸ’° Caja del DÃ­a</h2>
    <p class="subtitulo">GestiÃ³n de la caja â€” apertura, cierre y resumen.</p>

    {% if caja %}
      <div class="info-line">
        <span>Monto inicial:</span>
        <strong>S/. {{ caja.monto_inicial|floatformat:2 }}</strong>
      </div>
      <div class="info-line">
        <span>Total vendido:</span>
        <strong>S/. {{ caja.total_vendido|default:0|floatformat:2 }}</strong>
      </div>
      <div class="info-line">
        <span>Monto final:</span>
        <strong>S/. {{ caja.monto_final|floatformat:2 }}</strong>
      </div>

      {% if caja.abierta %}
        <div class="estado estado-abierta">âœ… Caja Abierta</div>
        <div class="acciones">
          <a href="{% url 'cerrar_caja' caja.id %}" class="btn-cerrar">ðŸ”’ Cerrar Caja</a>
        </div>
      {% else %}
        <div class="estado estado-cerrada">ðŸ”’ Caja Cerrada</div>
        <p class="texto-mutedo">La caja de hoy ya fue cerrada.</p>
      {% endif %}
    {% else %}
      <div class="sin-caja">
        <p class="texto-mutedo">No se abriÃ³ caja hoy.</p>
        <a href="{% url 'abrir_caja' %}" class="btn-abrir">ðŸ’° Abrir Caja</a>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
body {
  background:#0d1b2a;
  color:#fff;
  font-family:'Poppins',sans-serif;
}
.detalle-caja-container {
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:80vh;
  padding:1rem;
}
.detalle-caja-card {
  background:#1b263b;
  padding:2rem;
  border-radius:1rem;
  box-shadow:0 4px 20px rgba(0,0,0,0.4);
  width:100%;
  max-width:500px;
}
.titulo {
  text-align:center;
  color:#00bfff;
  margin-bottom:0.5rem;
}
.subtitulo {
  text-align:center;
  color:#aaa;
  margin-bottom:1.5rem;
}
.info-line {
  display:flex;
  justify-content:space-between;
  background:#0d1b2a;
  padding:0.7rem 1rem;
  border-radius:0.6rem;
  margin-bottom:0.7rem;
  font-size:1rem;
}
.estado {
  text-align:center;
  margin:1rem 0;
  font-weight:600;
  padding:0.5rem;
  border-radius:0.5rem;
}
.estado-abierta { background:rgba(0,255,127,0.1); color:#00ff7f; }
.estado-cerrada { background:rgba(255,99,71,0.1); color:#ff6347; }
.acciones { text-align:center; }
.btn-cerrar {
  background:#ff4d4d;
  padding:0.7rem 1rem;
  border-radius:0.6rem;
  color:#fff;
  text-decoration:none;
  font-weight:600;
  transition:0.3s;
}
.btn-cerrar:hover { background:#e63939; }
.sin-caja {
  text-align:center;
}
.texto-mutedo {
  color:#aaa;
  margin-bottom:1rem;
}
.btn-abrir {
  background:#00bfff;
  padding:0.7rem 1rem;
  border-radius:0.6rem;
  color:#fff;
  text-decoration:none;
  font-weight:600;
  transition:0.3s;
}
.btn-abrir:hover { background:#009acd; }
</style>
{% endblock %}
